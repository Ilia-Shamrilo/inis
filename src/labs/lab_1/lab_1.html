<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Movie DB</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #000000;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #6de7ff;
        }
    </style>
</head>
<body>
<div id="movies-table"></div>

<script>
    // 1) Создаем переменную numberOfFilms и запрашиваем у пользователя количество фильмов
    let numberOfFilms = prompt('Сколько фильмов вы уже посмотрели?', '');

    // 2) Создаем объект personalMovieDB
    const personalMovieDB = {
        count: numberOfFilms,
        movies: {}
    };

    // 3) Задаем пользователю вопросы и проверяем ответы
    for (let i = 0; i < 2; i++) {
        let filmName, filmRating;

        // Проверка названия фильма
        do {
            filmName = prompt('Один из последних просмотренных фильмов?', '');
        } while (!filmName || filmName.length > 50 || filmName.trim() === '');

        // Проверка оценки фильма (от 1 до 10)
        do {
            filmRating = prompt('На сколько оцените его? (от 1 до 10)', '');
            // Проверяем, что оценка является числом и находится в диапазоне от 1 до 10
            filmRating = parseFloat(filmRating); // Преобразуем в число
        } while (isNaN(filmRating) || filmRating < 1 || filmRating > 10);

        // 5) Записываем ответы в объект movies
        personalMovieDB.movies[filmName] = filmRating;
    }

    // 6) Выводим объект personalMovieDB в консоль
    console.log(personalMovieDB);

    // 7) Функция для вывода объекта movies в виде таблицы на страницу
    function renderMoviesTable(movies) {
        const table = document.createElement('table');
        const thead = document.createElement('thead');
        const tbody = document.createElement('tbody');

        // Создаем заголовок таблицы
        const headerRow = document.createElement('tr');
        const headerFilm = document.createElement('th');
        headerFilm.textContent = 'Фильм';
        const headerRating = document.createElement('th');
        headerRating.textContent = 'Оценка';
        headerRow.appendChild(headerFilm);
        headerRow.appendChild(headerRating);
        thead.appendChild(headerRow);
        table.appendChild(thead);

        // Заполняем таблицу данными
        for (const [film, rating] of Object.entries(movies)) {
            const row = document.createElement('tr');
            const cellFilm = document.createElement('td');
            cellFilm.textContent = film;
            const cellRating = document.createElement('td');
            cellRating.textContent = rating;
            row.appendChild(cellFilm);
            row.appendChild(cellRating);
            tbody.appendChild(row);
        }

        table.appendChild(tbody);
        document.getElementById('movies-table').appendChild(table);
    }

    // Вызываем функцию для отображения таблицы
    renderMoviesTable(personalMovieDB.movies);
</script>
</body>
</html>